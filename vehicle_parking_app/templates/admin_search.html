<!DOCTYPE html>
<html>
<head>
    <title>Admin - Search Parking Lots</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .header {
            background-color: lightgreen;
            padding: 10px;
            display: flex;
            justify-content: space-between;
        }
        .header-left {
            font-weight: bold;
            color: red;
        }
        .header-right a {
            margin-left: 15px;
            text-decoration: none;
            color: blue;
        }
        .nav {
            margin-top: 15px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
        }
        .search-bar {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 10px;
        }
        .lots-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        .lot-card {
            border: 2px solid black;
            border-radius: 8px;
            padding: 15px;
            margin: 15px;
            width: 220px;
            text-align: center;
        }
        .lot-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 10px;
        }
        .spot-btn {
            width: 35px;
            height: 35px;
            margin: 3px;
            border: 1px solid black;
            border-radius: 4px;
            font-size: 18px;
        }
        .occupied {
            background-color: pink;
            color: black;
        }
        .unoccupied {
            background-color: lightgreen;
            color: black;
        }
        .actions {
            margin: 5px 0;
        }
    </style>
</head>
<body>

<div class="header">
    <div class="header-left">Welcome to Admin</div>
    <div class="header-right">
        <a href="/admin_dashboard">Home</a> |
        <a href="/admin_registered_users">Users</a> |
        <a href="/admin_search">Search</a> |
        <a href="/admin_summary">Summary</a> |
        <a href="/logout">Logout</a> |
        <a href="/admin_edit_profile">Edit Profile</a>
    </div>
</div>
<div class="nav">Search Parking Lots</div>
<form method="GET" action="/admin_search">
    <div class="search-bar">
        <select name="search_by" required>
            <option value="">Search by</option>
            <option value="id">Parking Lot ID</option>
            <option value="location">Location</option>
        </select>
        <input type="text" name="search_query" placeholder="Enter search string" required>
        <button type="submit">Enter</button>
    </div>
</form>

<div class="lots-container">
    {% for lot in lots %}
    <div class="lot-card">
        <h3>Parking#{{ lot.id }}</h3>
        <div class="actions">
            <a href="/edit_lot/{{ lot.id }}">Edit</a> |
            <a href="/delete_lot/{{ lot.id }}">Delete</a>
        </div>
        <p>(Occupied: {{ lot.occupied_spots }} / {{ lot.max_spots }})</p>

        <div class="lot-buttons">
            {% for i in range(1, lot.max_spots + 1) %}
                {% if i <= lot.occupied_spots %}
                    <button class="spot-btn occupied">O</button>
                {% else %}
                    <button class="spot-btn unoccupied">U</button>
                {% endif %}
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>
</body>
</html>
